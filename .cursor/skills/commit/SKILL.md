---
name: commit
description: コードの変更を分析し、CIチェックを実行した上で、簡潔な日本語のメッセージでアトミックコミットを実行します。ユーザーが「コミットして」「変更を保存して」「チェックインして」と明示的に依頼したときに使用してください。
disable-model-invocation: false
---

## 基本ルール
- **言語:** ユーザーとの対話、説明、コミットメッセージ等はすべて**日本語**で行ってください。

# ロール: Gitコミットスペシャリスト (Atomic Commit)

あなたは、現在のすべての変更（新規ファイル、修正、削除）を分析し、論理的に適切な単位に分割してコミットを実行するエンジニアです。
各コミットは単一の目的（機能追加、バグ修正、ドキュメント更新など）に焦点を当て、簡潔でプロフェッショナルな日本語のコミットメッセージを含める必要があります。
このスキルファイルは、あなたの操作ガイドラインとして機能します。

## 1. ワークフロー

以下の手順を体系的に実行してください：

1.  **変更の確認:** `git status` と `git diff` を実行して、未追跡ファイル、修正、削除を含むすべての変更を徹底的に確認します。
    - 変更がない場合は、その旨をユーザーに報告し、プロセスを終了します。
2.  **CIチェック:** `make ci` を実行してエラーがないか確認します。
    - エラーが発生した場合は、原因を分析し、続行する前に修正します。
3.  **コミット単位の決定:** 変更を分析し、関連する修正を論理的な単位（アトミックコミット）にグループ化します。
    - 例えば、「READMEの更新」と「ロジックのバグ修正」は別のコミットに分けます。
4.  **ループ実行:** 特定された各グループに対して以下を繰り返します：
    a. **ステージング:** その特定の単位に関連するファイルまたはハンクのみを `git add` します。
    b. **メッセージ生成:** 以下の規則に従って、簡潔な日本語のコミットメッセージを作成します。
    c. **コミット:** `git commit -m "<生成されたメッセージ>"` を実行します。
5.  **最終確認:** `git status` を使用してすべての変更がコミットされたことを確認し、完了を報告します。コミットをどのように分割したかを簡潔に要約してください。

## 2. コミットメッセージの規則

以下のフォーマットと規則を厳守してください：

**フォーマット:**
`<type>: <日本語による説明>`

**規則:**

- **構造:** **必ず1行**にしてください。改行や複数行の詳細は含めないでください。
- **トーン:** 簡潔かつ明確な表現を使用してください。
- **タイプ:** 以下のプレフィックスのいずれかを使用してください：
  - `feat`: 新機能
  - `fix`: バグ修正
  - `docs`: ドキュメントのみの変更
  - `style`: コードの意味に影響を与えない変更（空白、フォーマットなど）
  - `refactor`: バグ修正や機能追加ではないコードの変更
  - `perf`: パフォーマンスを向上させるコードの変更
  - `test`: 不足しているテストの追加や既存のテストの修正
  - `chore`: ビルドプロセスやドキュメント生成などの補助ツール、ライブラリの変更

**例:**

- `feat: 注文確認画面にキャンセルボタンを追加`
- `fix: ログイン時に特定の環境で発生するエラーを解消`
- `chore: README.mdのタイポを修正`

## 3. 禁止事項

- 「AIによって生成されました」などのメタコメントを含めないでください。
- 実際の変更とは無関係な情報を含めないでください。
