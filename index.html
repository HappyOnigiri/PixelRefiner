<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary SEO -->
    <title data-i18n="app.title">
      Pixel Refiner | AI Pixel Art Optimizer & Background Remover
    </title>
    <meta
      name="description"
      content="Optimize AI-generated pixel art into production-ready sprites. Complete anti-aliasing removal and background transparency in seconds."
    />
    <meta
      name="keywords"
      content="pixel art, AI, anti-aliasing removal, background transparency, game assets, sprite, Pixel Refiner, pixel art optimization, AI image conversion, game development, indie game"
    />

    <!-- Canonical / Indexing -->
    <link rel="canonical" href="https://pixel-refiner.app/" />
    <meta
      name="robots"
      content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
    />

    <!-- Language / Locale -->
    <link rel="alternate" hreflang="ja" href="https://pixel-refiner.app/" />
    <link
      rel="alternate"
      hreflang="x-default"
      href="https://pixel-refiner.app/"
    />

    <!-- Additional Meta -->
    <meta name="author" content="Pixel Refiner" />
    <meta name="application-name" content="Pixel Refiner" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="color-scheme" content="dark" />
    <meta name="theme-color" content="#0f1115" />

    <!-- Favicon / Icons -->
    <link rel="icon" href="/favicon.ico" sizes="48x48" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/ogp.png" />

    <!-- Web App Manifest -->
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Pixel Refiner" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://pixel-refiner.app/" />
    <meta property="og:site_name" content="Pixel Refiner" />
    <meta property="og:locale" content="ja_JP" />
    <meta
      property="og:title"
      content="Pixel Refiner | AIドット絵の最適化・背景透過ツール"
    />
    <meta
      property="og:description"
      content="AIで生成したドット絵を、ゲーム素材として使えるクオリティに。アンチエイリアス除去・背景透過を数秒で完了します。"
    />
    <meta property="og:image" content="https://pixel-refiner.app/ogp.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="Pixel Refiner - AIドット絵最適化ツール"
    />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://pixel-refiner.app/" />
    <meta
      name="twitter:title"
      content="Pixel Refiner | AIドット絵の最適化・背景透過ツール"
    />
    <meta
      name="twitter:description"
      content="AIで生成したドット絵を、ゲーム素材として使えるクオリティに。アンチエイリアス除去・背景透過を数秒で完了します。"
    />
    <meta name="twitter:image" content="https://pixel-refiner.app/ogp.png" />
    <meta
      name="twitter:image:alt"
      content="Pixel Refiner - AIドット絵最適化ツール"
    />

    <!-- JSON-LD Structured Data: WebApplication -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Pixel Refiner",
        "url": "https://pixel-refiner.app/",
        "description": "AIで生成したドット絵を、ゲーム素材として使えるクオリティに最適化するオンラインツール。アンチエイリアス除去・減色・背景透過をブラウザ上で安全に処理。",
        "applicationCategory": "DesignApplication",
        "operatingSystem": "All",
        "browserRequirements": "Requires a modern web browser with JavaScript enabled",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "JPY"
        },
        "featureList": [
          "アンチエイリアス除去",
          "背景透過",
          "自動グリッド検出",
          "減色処理",
          "ピクセルアート最適化",
          "ブラウザ内処理（画像アップロード不要）"
        ],
        "screenshot": "https://pixel-refiner.app/ogp.png",
        "softwareHelp": {
          "@type": "CreativeWork",
          "url": "https://github.com/HappyOnigiri/PixelRefiner"
        },
        "creator": {
          "@type": "Organization",
          "name": "Pixel Refiner",
          "url": "https://pixel-refiner.app/"
        }
      }
    </script>

    <!-- JSON-LD Structured Data: FAQPage -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "Pixel Refinerとは何ですか？",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Pixel Refinerは、AIで生成したドット絵（ピクセルアート）を最適化するための無料オンラインツールです。アンチエイリアス除去、背景透過、自動グリッド検出などの機能を備え、ゲーム素材として使えるクオリティに仕上げます。"
            }
          },
          {
            "@type": "Question",
            "name": "画像はサーバーにアップロードされますか？",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "いいえ、すべての画像処理はブラウザ内で完結します。画像がサーバーに送信されることは一切ないため、プライバシーを心配する必要はありません。"
            }
          },
          {
            "@type": "Question",
            "name": "どのような画像形式に対応していますか？",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "PNG、JPEG、GIF、WebPなどブラウザが表示できる一般的な画像形式に対応しています。出力はPNG形式で、背景透過にも対応しています。"
            }
          },
          {
            "@type": "Question",
            "name": "無料で使えますか？",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "はい、完全無料で利用できます。ユーザー登録も不要です。"
            }
          }
        ]
      }
    </script>

    <!-- JSON-LD Structured Data: HowTo -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "AIドット絵をゲーム素材に最適化する方法",
        "description": "Pixel Refinerを使って、AI生成のドット絵をアンチエイリアス除去・背景透過してゲーム素材に仕上げる手順です。",
        "step": [
          {
            "@type": "HowToStep",
            "position": 1,
            "name": "画像をアップロード",
            "text": "ドット絵画像をドラッグ＆ドロップするか、クリックしてファイルを選択します。"
          },
          {
            "@type": "HowToStep",
            "position": 2,
            "name": "処理を実行",
            "text": "「処理を実行」ボタンをクリックすると、自動でグリッド検出・アンチエイリアス除去・背景透過が行われます。"
          },
          {
            "@type": "HowToStep",
            "position": 3,
            "name": "結果をダウンロード",
            "text": "処理結果を確認し、「ダウンロード」ボタンで最適化されたPNGをダウンロードします。拡大率も選択可能です。"
          }
        ],
        "totalTime": "PT30S",
        "tool": {
          "@type": "HowToTool",
          "name": "Webブラウザ"
        }
      }
    </script>

    <style>
      html,
      body {
        background-color: #0f1115;
      }
      .app {
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
      }
      body.loaded .app {
        opacity: 1;
      }
      .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header>
        <h1><span class="logo-p">P</span>ixel Refiner</h1>
        <p class="app-description" data-i18n="app.description" data-i18n-html>
          Optimize AI-generated pixel art into
          <span class="text-highlight">production-ready sprites</span>.<br />
          Complete <span class="text-highlight">anti-aliasing removal</span> and
          <span class="text-highlight">background transparency</span> in
          seconds.
        </p>
      </header>

      <main>
        <!-- Eyedropper Modal -->
        <div id="eyedropper-modal" class="modal" style="display: none">
          <div class="modal-content">
            <div class="modal-header">
              <h3 data-i18n="modal.eyedropper.title">
                Select Background Color
              </h3>
              <button id="close-eyedropper-modal" class="close-button">
                &times;
              </button>
            </div>
            <div class="modal-body">
              <p
                class="modal-instruction"
                data-i18n="modal.eyedropper.instruction"
              >
                Click on the color in the image you want to set as background
              </p>
              <div class="modal-canvas-container">
                <canvas id="eyedropper-canvas"></canvas>
              </div>
            </div>
          </div>
        </div>

        <section class="row" aria-label="Image processing area">
          <div class="panel input-panel" id="drop-area">
            <h2 data-i18n="section.input">Input Image</h2>
            <div class="status">
              <span data-i18n="ui.size">Size</span>:
              <span id="input-size">-</span>
            </div>
            <div class="canvas-container">
              <div class="placeholder">
                <div class="drop-icon">
                  <img src="/folder.png" alt="Folder" />
                </div>
                <div
                  class="drop-text"
                  data-i18n="ui.placeholder.input"
                  data-i18n-html
                >
                  Drag & drop image here<br />
                  <span class="drop-subtext">or Click to select</span>
                </div>
              </div>
              <canvas id="original-canvas"></canvas>
            </div>
            <input
              id="file-input"
              type="file"
              accept="image/*"
              style="display: none"
            />
          </div>

          <div class="panel output-panel" id="output-panel">
            <h2 data-i18n="section.result">Result</h2>
            <div class="status-bar">
              <div class="status-text">
                <span data-i18n="ui.size">Size</span>:
                <span id="output-size">-</span>
              </div>
              <div class="controls-right">
                <div class="bg-selector" id="bg-selector">
                  <button
                    type="button"
                    class="bg-btn bg-checkered active"
                    data-bg="checkered"
                    data-i18n-attr="title:attr.title.bg_checkered"
                    title="Background: Checkered"
                  ></button>
                  <button
                    type="button"
                    class="bg-btn bg-white"
                    data-bg="white"
                    data-i18n-attr="title:attr.title.bg_white"
                    title="Background: White"
                  ></button>
                  <button
                    type="button"
                    class="bg-btn bg-black"
                    data-bg="black"
                    data-i18n-attr="title:attr.title.bg_black"
                    title="Background: Black"
                  ></button>
                  <button
                    type="button"
                    class="bg-btn bg-green"
                    data-bg="green"
                    data-i18n-attr="title:attr.title.bg_green"
                    title="Background: Green"
                  ></button>
                </div>
                <label
                  class="zoom-toggle"
                  data-i18n-attr="title:attr.title.grid_toggle"
                  title="Show Grid (Zoom only)"
                >
                  <input type="checkbox" id="grid-output" checked />
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <rect
                      x="3"
                      y="3"
                      width="18"
                      height="18"
                      rx="2"
                      ry="2"
                    ></rect>
                    <line x1="3" y1="9" x2="21" y2="9"></line>
                    <line x1="3" y1="15" x2="21" y2="15"></line>
                    <line x1="9" y1="3" x2="9" y2="21"></line>
                    <line x1="15" y1="3" x2="15" y2="21"></line>
                  </svg>
                </label>
                <label
                  class="zoom-toggle"
                  data-i18n-attr="title:attr.title.zoom_toggle"
                  title="Zoom Output"
                >
                  <input type="checkbox" id="zoom-output" checked />
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    <line x1="8" y1="11" x2="14" y2="11"></line>
                    <line x1="11" y1="8" x2="11" y2="14"></line>
                  </svg>
                </label>
              </div>
            </div>
            <div class="canvas-container">
              <div class="placeholder">
                <div class="drop-text" data-i18n="ui.placeholder.result">
                  Processed result will appear here
                </div>
              </div>
              <div
                class="loading-overlay"
                id="loading-overlay"
                style="display: none"
              >
                <div class="spinner"></div>
                <div class="loading-text" data-i18n="status.processing">
                  Processing...
                </div>
              </div>
              <canvas id="result-canvas"></canvas>
              <canvas id="grid-canvas"></canvas>
            </div>
          </div>
        </section>

        <div class="actions">
          <button
            id="process-button"
            type="button"
            class="action-button"
            data-i18n="ui.process_btn"
          >
            Process Image
          </button>
          <div class="download-group">
            <button
              id="download-button"
              type="button"
              class="action-button download-button"
              data-i18n="ui.download_btn"
              disabled
            >
              Download
            </button>
            <button
              id="download-dropdown-button"
              type="button"
              class="action-button download-dropdown-button"
              disabled
            >
              ▼
            </button>
            <div id="download-menu" class="download-menu">
              <button type="button" data-scale="2">x2</button>
              <button type="button" data-scale="4">x4</button>
              <button type="button" data-scale="8">x8</button>
              <button type="button" data-scale="16">x16</button>
              <button type="button" data-scale="32">x32</button>
            </div>
          </div>
        </div>

        <div class="quick-settings">
          <div class="settings-group">
            <h3
              class="settings-group-title"
              data-i18n="setting.color_reduction"
            >
              Color Reduction
            </h3>
            <div class="grid-settings">
              <label class="setting-item">
                <span class="label-text">
                  <span data-i18n="setting.color_mode">Reduction Mode</span>
                  <span
                    class="help"
                    data-i18n-attr="data-tooltip:tooltip.help.color_mode"
                    data-tooltip="Limits the number of colors in the output.&#10;&#10;Useful for achieving a classic pixel art look.&#10;None: No color reduction.&#10;Game Boy / PICO-8 / NES: Uses specific console palettes.&#10;Auto: Automatically reduces to the specified number of colors."
                    >?</span
                  >
                </span>
                <select id="reduce-color-mode">
                  <option value="none" data-i18n="option.none">None</option>
                  <option value="mono" data-i18n="option.mono">
                    Monochrome
                  </option>
                  <option value="gb_legacy" data-i18n="option.gb_legacy">
                    Game Boy (Original)
                  </option>
                  <option value="gb_pocket" data-i18n="option.gb_pocket">
                    Game Boy (Pocket)
                  </option>
                  <option value="gb_light" data-i18n="option.gb_light">
                    Game Boy (Light)
                  </option>
                  <option value="pico8" data-i18n="option.pico8">PICO-8</option>
                  <option value="nes" data-i18n="option.nes" selected>
                    NES
                  </option>
                  <option value="pc98" data-i18n="option.pc98">PC-9801</option>
                  <option value="msx" data-i18n="option.msx">MSX1</option>
                  <option value="c64" data-i18n="option.c64">
                    Commodore 64
                  </option>
                  <option value="arne16" data-i18n="option.arne16">
                    Arne 16
                  </option>
                  <option
                    value="sfc_sprite"
                    data-i18n="option.sfc_sprite"
                    selected
                  >
                    SFC Style (16 colors/Sprite)
                  </option>
                  <option value="sfc_bg" data-i18n="option.sfc_bg">
                    SFC Style (256 colors/BG)
                  </option>
                  <option value="auto" data-i18n="option.auto">
                    Custom Count
                  </option>
                </select>
              </label>

              <label id="color-count-setting" class="setting-item">
                <span class="label-text">
                  <span data-i18n="setting.color_count">Color Count</span>
                  <span
                    id="help-color-count"
                    class="help"
                    data-i18n-attr="data-tooltip:tooltip.help.color_count"
                    data-tooltip="Specifies the maximum number of colors in the output.&#10;&#10;Range: {min} to {max} (Default: {default})"
                    >?</span
                  >
                </span>
                <div class="input-with-slider">
                  <input id="color-count-slider" type="range" />
                  <input id="color-count" type="number" />
                </div>
              </label>

              <label class="setting-item">
                <span class="label-text">
                  <span data-i18n="setting.dither_mode">Dithering</span>
                  <span
                    class="help"
                    data-i18n-attr="data-tooltip:tooltip.help.dither_mode"
                    data-tooltip="Applies dithering (error diffusion) during color reduction.&#10;&#10;Allows for smoother gradients with fewer colors, but introduces characteristic pixel noise."
                    >?</span
                  >
                </span>
                <select id="dither-mode">
                  <option value="none" data-i18n="option.none">None</option>
                  <option value="floyd-steinberg">Floyd-Steinberg</option>
                </select>
              </label>

              <label id="dither-strength-setting" class="setting-item">
                <span class="label-text">
                  <span data-i18n="setting.dither_strength"
                    >Dither Strength</span
                  >
                  <span
                    id="help-dither-strength"
                    class="help"
                    data-i18n-attr="data-tooltip:tooltip.help.dither_strength"
                    data-tooltip="Sets the intensity of the dithering effect.&#10;&#10;100%: Full error diffusion.&#10;0%: No dithering, rounds to the nearest color.&#10;&#10;Range: {min} to {max} (Default: {default})"
                    >?</span
                  >
                </span>
                <div class="input-with-slider">
                  <input id="dither-strength-slider" type="range" />
                  <input id="dither-strength" type="number" />
                </div>
              </label>
            </div>
          </div>
        </div>

        <details id="settings-panel" class="panel settings-panel">
          <summary data-i18n="setting.advanced">Advanced Settings</summary>
          <div class="settings-content">
            <div class="settings-group">
              <h3
                class="settings-group-title"
                data-i18n="setting.grid_detection"
              >
                Grid Detection
              </h3>
              <div class="grid-settings">
                <label class="setting-item full-width">
                  <span class="label-text">
                    <span data-i18n="setting.enable_grid"
                      >Enable Grid Detection</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.enable_grid"
                      data-tooltip="Automatically detects the grid from the input image and reduces/optimizes it to pixel units.&#10;&#10;If OFF, grid detection and reduction are skipped (useful if the image is already a 1:1 pixel art). Background trimming and transparency will still be performed based on other settings."
                      >?</span
                    >
                  </span>
                  <input id="enable-grid-detection" type="checkbox" checked />
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.quant_step"
                      >Quantization Step</span
                    >
                    <span
                      id="help-quant-step"
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.quant_step"
                      data-tooltip="Sets the color reduction level for grid detection.&#10;&#10;High: Colors are grouped, making it resistant to noise, but subtle color differences may be lost.&#10;Low: Picks up fine color boundaries, but increases the risk of false noise detection.&#10;&#10;Range: {min} to {max} (Default: {default})"
                      >?</span
                    >
                  </span>
                  <div class="input-with-slider">
                    <input id="quant-step-slider" type="range" />
                    <input id="quant-step" type="number" />
                  </div>
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.sample_window">Sample Window</span>
                    <span
                      id="help-sample-window"
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.sample_window"
                      data-tooltip="The reference range (in pixels) used when determining the color of each dot.&#10;&#10;High: Noise is removed and colors become stable, but fine details may be lost.&#10;Low: Faithfully reproduces the original image, but is more affected by misalignment and noise.&#10;&#10;Range: {min} to {max} (Default: {default})"
                      >?</span
                    >
                  </span>
                  <div class="input-with-slider">
                    <input id="sample-window-slider" type="range" />
                    <input id="sample-window" type="number" />
                  </div>
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.force_width"
                      >Force Width (px)</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.force_width"
                      data-tooltip="Forces conversion to the specified size.&#10;Automatic detection is not performed when a specific size is set.&#10;&#10;Range: 1 to 1024 (Default: Auto)"
                      >?</span
                    >
                  </span>
                  <input
                    id="force-pixels-w"
                    type="number"
                    placeholder="Auto"
                    data-i18n-attr="placeholder:attr.placeholder.auto"
                  />
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.force_height"
                      >Force Height (px)</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.force_height"
                      data-tooltip="Forces conversion to the specified size.&#10;Automatic detection is not performed when a specific size is set.&#10;&#10;Range: 1 to 1024 (Default: Auto)"
                      >?</span
                    >
                  </span>
                  <input
                    id="force-pixels-h"
                    type="number"
                    placeholder="Auto"
                    data-i18n-attr="placeholder:attr.placeholder.auto"
                  />
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.fast_mode">Fast Mode</span>
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.fast_mode"
                      data-tooltip="When ON, uses an efficient algorithm to speed up the search.&#10;When OFF, performs a more comprehensive and precise search.&#10;&#10;If automatic detection results are misaligned or the image has a lot of noise/fine patterns, turning this OFF may improve accuracy."
                      >?</span
                    >
                  </span>
                  <input id="fast-auto-grid-from-trimmed" type="checkbox" />
                </label>
              </div>
            </div>

            <div class="settings-group">
              <h3 class="settings-group-title" data-i18n="setting.bg_removal">
                Background Removal
              </h3>
              <div class="grid-settings">
                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.bg_method">Extraction Method</span>
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.bg_method"
                      data-tooltip="Select where to extract the background color from.&#10;&#10;None: No background transparency.&#10;Corners: Uses the pixel at the specified corner as the background color.&#10;RGB: Uses the specified color as the background color."
                      >?</span
                    >
                  </span>
                  <select id="bg-extraction-method">
                    <option value="none" data-i18n="option.bg_none">
                      None
                    </option>
                    <option
                      value="top-left"
                      data-i18n="option.bg_top_left"
                      selected
                    >
                      Top-Left (Default)
                    </option>
                    <option
                      value="bottom-left"
                      data-i18n="option.bg_bottom_left"
                    >
                      Bottom-Left
                    </option>
                    <option value="top-right" data-i18n="option.bg_top_right">
                      Top-Right
                    </option>
                    <option
                      value="bottom-right"
                      data-i18n="option.bg_bottom_right"
                    >
                      Bottom-Right
                    </option>
                    <option value="rgb" data-i18n="option.bg_rgb">
                      RGB Specification
                    </option>
                  </select>
                </label>

                <div id="rgb-picker-container" class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.bg_rgb"
                      >Background Color (RGB)</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.bg_rgb"
                      data-tooltip="Specify the color to be treated as the background in hex format (e.g., #ffffff).&#10;When a corner is specified, the color is automatically set. You can also pick a color from the image using the eyedropper button."
                      >?</span
                    >
                  </span>
                  <div class="rgb-input-group">
                    <input
                      id="bg-rgb-input"
                      type="text"
                      placeholder="#ffffff"
                    />
                    <input
                      id="bg-color-input"
                      type="color"
                      style="
                        width: 40px;
                        height: 32px;
                        padding: 0;
                        border: none;
                        background: none;
                      "
                    />
                    <button
                      id="eyedropper-button"
                      type="button"
                      class="icon-button"
                      data-i18n-attr="title:attr.title.eyedropper"
                      title="Pick color from image"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path d="m2 22 1-1h3l9-9"></path>
                        <path d="M3 21v-3l9-9"></path>
                        <path
                          d="m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l-3-3Z"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.bg_tolerance"
                      >Color Tolerance</span
                    >
                    <span
                      id="help-tolerance"
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.bg_tolerance"
                      data-tooltip="The similarity (error range) for determining the background color.&#10;&#10;High: Can remove background even if colors are slightly distorted by compression noise, but may also remove intended colors.&#10;Low: Strictly removes only the exact background color, but noise may remain.&#10;&#10;Range: {min} to {max} (Default: {default})"
                      >?</span
                    >
                  </span>
                  <div class="input-with-slider">
                    <input id="tolerance-slider" type="range" />
                    <input id="tolerance" type="number" />
                  </div>
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.pre_remove"
                      >Pre-process Transparency</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.pre_remove"
                      data-tooltip="Ignores the background color BEFORE performing grid detection.&#10;&#10;Benefit: Makes it easier to correctly detect the grid for the main subject even in images with large margins.&#10;Note: If the background color exists within the character, detection accuracy may decrease."
                      >?</span
                    >
                  </span>
                  <input id="pre-remove" type="checkbox" />
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.post_remove"
                      >Post-process Transparency</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.post_remove"
                      data-tooltip="Replaces the background color with transparency AFTER processing is complete.&#10;&#10;Benefit: Allows saving as a PNG with a transparent background.&#10;Note: Does not affect the grid detection process itself."
                      >?</span
                    >
                  </span>
                  <input id="post-remove" type="checkbox" />
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.remove_inner"
                      >Remove Inner Background</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.remove_inner"
                      data-tooltip='When removing the background, also makes similar background colors transparent throughout the entire image.&#10;&#10;Benefit: Can transparentize "trapped" background colors like the hole in a donut.&#10;Note: If the background color exists within the character, it may also become transparent.'
                      >?</span
                    >
                  </span>
                  <input id="remove-inner-background" type="checkbox" />
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.ignore_floating"
                      >Ignore Floating Noise</span
                    >
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.ignore_floating"
                      data-tooltip="Treats small isolated islands (connected components) surrounded by the background as part of the background and removes them.&#10;&#10;Prevents tiny noise from affecting the content BBox or automatic grid estimation.&#10;Note: In images with separate distant objects, they may also be removed."
                      >?</span
                    >
                  </span>
                  <input id="ignore-floating" type="checkbox" />
                </label>

                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.floating_max"
                      >Max Noise Size (%)</span
                    >
                    <span
                      id="help-floating-max-percent"
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.floating_max"
                      data-tooltip='The maximum area (as a percentage of the total pixels in the original image) to be considered for removal when "Ignore Floating Noise" is ON.&#10;Example: 1% → (Width × Height × 0.01) px&#10;&#10;Range: {min} to {max} (Default: {default})'
                      >?</span
                    >
                  </span>
                  <div class="input-with-slider">
                    <input
                      id="floating-max-percent-slider"
                      type="range"
                      step="0.1"
                    />
                    <input id="floating-max-percent" type="number" step="0.1" />
                  </div>
                </label>
              </div>
            </div>

            <div class="settings-group">
              <h3 class="settings-group-title" data-i18n="setting.trimming">
                Trimming
              </h3>
              <div class="grid-settings">
                <label class="setting-item">
                  <span class="label-text">
                    <span data-i18n="setting.auto_trim">Auto Trim</span>
                    <span
                      class="help"
                      data-i18n-attr="data-tooltip:tooltip.help.auto_trim"
                      data-tooltip="Automatically trims the output to fit the range containing the content.&#10;&#10;Useful for correctly detecting the number of vertical and horizontal cells in images with large margins (background)."
                      >?</span
                    >
                  </span>
                  <input id="trim-to-content" type="checkbox" />
                </label>
              </div>
            </div>
          </div>
        </details>
      </main>

      <!-- SEO: 検索エンジン向け追加コンテンツ（画面上は非表示） -->
      <aside class="visually-hidden" aria-hidden="true">
        <h2>Pixel Refinerの特徴</h2>
        <ul>
          <li>AIで生成したドット絵を自動でクリーンアップ</li>
          <li>アンチエイリアスを除去してくっきりしたピクセルアートに</li>
          <li>ワンクリックで背景を透過処理</li>
          <li>自動グリッド検出で最適なピクセルサイズを判定</li>
          <li>ブラウザ内で完結、画像はサーバーにアップロードされません</li>
          <li>完全無料・登録不要で利用可能</li>
          <li>PNG形式で高品質ダウンロード、最大32倍の拡大出力に対応</li>
        </ul>
        <h2>こんな方におすすめ</h2>
        <ul>
          <li>
            AI画像生成ツール（Stable Diffusion,
            Midjourney等）でドット絵を作った方
          </li>
          <li>インディーゲーム開発でスプライト素材が必要な方</li>
          <li>ドット絵のアンチエイリアスを手動で除去するのが面倒な方</li>
          <li>ゲーム用アセットの背景透過を自動化したい方</li>
        </ul>
      </aside>

      <footer class="app-footer">
        <div class="footer-content">
          <p>
            &copy; 2026 Pixel Refiner. All rights reserved.
            <span id="app-version" class="app-version"></span>
          </p>
          <div class="footer-links">
            <a
              href="https://x.com/H_OnigiriWorks"
              target="_blank"
              rel="noopener noreferrer"
              title="X (Twitter)"
              class="x-link"
            >
              <img src="/logo_x.svg" alt="X" width="18" height="18" />
            </a>
            <a
              href="https://github.com/HappyOnigiri/PixelRefiner"
              target="_blank"
              rel="noopener noreferrer"
              title="GitHub"
              class="github-link"
            >
              <img src="/logo_github.svg" alt="GitHub" width="20" height="20" />
            </a>
            <span class="separator">|</span>
            <div class="lang-selector">
              <button class="lang-btn" data-lang-btn="en">EN</button>
              <span class="separator">/</span>
              <button class="lang-btn" data-lang-btn="ja">JA</button>
            </div>
            <span class="separator">|</span>
            <span class="privacy-note" data-i18n="footer.privacy">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                style="vertical-align: middle; margin-right: 4px"
              >
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              Images are processed safely within your browser
            </span>
          </div>
        </div>
      </footer>
    </div>
    <script type="module" src="/src/browser/main.ts"></script>
  </body>
</html>
